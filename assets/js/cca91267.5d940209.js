"use strict";(self.webpackChunkdocusite=self.webpackChunkdocusite||[]).push([[3446],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>g});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function l(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function i(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=n.createContext({}),d=function(e){var t=n.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):l(l({},t),e)),a},u=function(e){var t=d(e.components);return n.createElement(s.Provider,{value:t},e.children)},c="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},f=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,s=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=d(a),f=r,g=c["".concat(s,".").concat(f)]||c[f]||p[f]||o;return a?n.createElement(g,l(l({ref:t},u),{},{components:a})):n.createElement(g,l({ref:t},u))}));function g(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,l=new Array(o);l[0]=f;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i[c]="string"==typeof e?e:r,l[1]=i;for(var d=2;d<o;d++)l[d]=a[d];return n.createElement.apply(null,l)}return n.createElement.apply(null,a)}f.displayName="MDXCreateElement"},5782:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>s,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>i,toc:()=>d});var n=a(7462),r=(a(7294),a(3905));const o={},l="500\u2010m Resolution Daily Global Surface Water Change Database (2001\u20132016)",i={unversionedId:"water/Global-daily-surface-water",id:"water/Global-daily-surface-water",title:"500\u2010m Resolution Daily Global Surface Water Change Database (2001\u20132016)",description:"Citation",source:"@site/docs/water/Global-daily-surface-water.md",sourceDirName:"water",slug:"/water/Global-daily-surface-water",permalink:"/docs/water/Global-daily-surface-water",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Vegetation height and structure - derived from ALOS-1 PALSAR, Landsat and ICESat/GLAS, Australia coverage",permalink:"/docs/veglayer/regional/TERN-vegetation-height"}},s={},d=[{value:"Citation",id:"citation",level:4},{value:"Data access",id:"data-access",level:4},{value:"Data download and preparation",id:"data-download-and-preparation",level:4},{value:"VRT datasets",id:"vrt-datasets",level:4},{value:"Notes",id:"notes",level:4}],u={toc:d},c="wrapper";function p(e){let{components:t,...a}=e;return(0,r.kt)(c,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"500m-resolution-daily-global-surface-water-change-database-20012016"},"500\u2010m Resolution Daily Global Surface Water Change Database (2001\u20132016)"),(0,r.kt)("h4",{id:"citation"},"Citation"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"Luyan Ji, Peng Gong, Jie Wang, Jiancheng Shi, Zhiliang Zhu (2018) ",(0,r.kt)("em",{parentName:"p"},"Construction of the 500-m Resolution Daily Global Surface Water Change Database (2001-2016)"),". ",(0,r.kt)("strong",{parentName:"p"},"Water Resources Research")," DOI ",(0,r.kt)("a",{parentName:"p",href:"http://dx.doi.org/10.1029/2018wr023060"},"10.1029/2018wr023060"))),(0,r.kt)("h4",{id:"data-access"},"Data access"),(0,r.kt)("p",null,"Data is available at:"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},(0,r.kt)("a",{parentName:"p",href:"http://data.ess.tsinghua.edu.cn/modis_500_2001_2016_waterbody.html"},"http://data.ess.tsinghua.edu.cn/modis_500_2001_2016_waterbody.html"))),(0,r.kt)("p",null,"But no documentation or metadata is provided."),(0,r.kt)("h4",{id:"data-download-and-preparation"},"Data download and preparation"),(0,r.kt)("p",null,"This dataset is ",(0,r.kt)("strong",{parentName:"p"},"HUGE"),", each ",(0,r.kt)("em",{parentName:"p"},"compressed")," file is 16G."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"source ~/proyectos/UNSW/cesdata/env/project-env.sh\n\nmkdir -p $GISDATA/water/global/ModisDailyWater/\ncd $GISDATA/water/global/ModisDailyWater/\n\nfor YEAR in $(seq 2001 2016)\ndo\n wget -b -o wget-log-$YEAR --continue  http://data.ess.tsinghua.edu.cn/data/water/MODISWater-500-2001-2015/${YEAR}.rar\ndone\n\n# Check that all finished without problem:\n tail wget-log*\n\n# alternative:\n# curl -C - -O http://data.ess.tsinghua.edu.cn/data/water/MODISWater-500-2001-2015/[2001-2016].rar\n\n")),(0,r.kt)("p",null,"Extract data (using a PBS job: ",(0,r.kt)("inlineCode",{parentName:"p"},"qsub -I -l select=1:ncpus=1:mem=120gb,walltime=12:00:00"),")"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"source ~/proyectos/UNSW/cesdata/env/project-env.sh\n\ncd $GISDATA/water/ModisDailyWater/\n\nlsar -l 2016.rar ## 242623 directories/files\nunar 2016.rar ## ca. 2 hours to finish - successful extraction\ntree -a 2016-v3/ ## 331 directories, 242292 files\ndu -sch 2016-v3/ ## 39G\n")),(0,r.kt)("p",null,"Now repeat this for all the others, using a longer PBS job..."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"for YEAR in $(seq 2001 2005)\ndo\n   unar ${YEAR}.rar\ndone\n")),(0,r.kt)("p",null,"... or an array of jobs to finish earlier:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"qsub -J 2006-2015 $SCRIPTDIR/inc/pbs/extract-water-Global-daily-surface-water.pbs\n")),(0,r.kt)("h4",{id:"vrt-datasets"},"VRT datasets"),(0,r.kt)("p",null,"Builds VRT (Virtual Dataset) as a mosaic of the list of input files"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'ssh -Y $zID@katana.restech.unsw.edu.au\nqsub -I -X -l select=1:ncpus=1:mem=120gb,walltime=12:00:00\n##module avail geos\nmodule add python/2.7.15 perl/5.28.0 gdal/3.2.1 geos/3.8.1\nmodule add grass/7.6.1\nmodule add R/4.0.2  proj4/5.1.0\nsource ~/proyectos/UNSW/cesdata/env/project-env.sh\n\nmkdir -p $GISDATA/water/global/ModisDailyWater/index\ncd $GISDATA/water/global/ModisDailyWater/index\n\nfor YEAR in $(seq 2001 2016)\ndo\n   mkdir -p $GISDATA/water/global/ModisDailyWater/index/${YEAR}\n   cd $GISDATA/water/global/ModisDailyWater/index/${YEAR}\n   for VAR in water flag\n   do\n      for DOY in {001..366}\n      do\n         ##ls $GISDATA/water/global/ModisDailyWater/${YEAR}/*/${YEAR}*${DOY}_${VAR}.tiff\n         if [ -e index_${VAR}_${YEAR}_${DOY}.vrt ]\n         then\n            echo "listo"\n         else\n            gdalbuildvrt index_${VAR}_${YEAR}_${DOY}.vrt $GISDATA/water/global/ModisDailyWater/${YEAR}*/*/${YEAR}*${DOY}_${VAR}.tiff\n         fi\n      done\n   done\ndone\n\n\ncd $GISDATA/water/global/ModisDailyWater/index\n\nfor i in $(seq 2001 2016);\ndo\n  echo $i\n   ls $i/* | wc\ndone\n\n\n')),(0,r.kt)("p",null,"There are four discrete values as 0-Land, 61-Water (unfrozen), 62-Water (frozen), and 255-Fill (areas of no value)."),(0,r.kt)("h4",{id:"notes"},"Notes"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Here some code for exploring in grass")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'cd $WORKDIR\nconda deactivate\ngrass74 -c $GISDATA/sensores/ModisDailyWater/2001/h00v08/2001h00v08073_water.tiff $GISDB/raw/ModisDailyWater\n\nr.in.gdal input=$GISDATA/sensores/ModisDailyWater/2001/h00v08/2001h00v08073_water.tiff output=water73\n\nr.in.gdal input=$GISDATA/sensores/ModisDailyWater/2001/h00v08/2001h00v08216_water.tiff output=water216\nr.in.gdal input=$GISDATA/sensores/ModisDailyWater/2001/h00v08/2001h00v08216_flag.tiff output=flag216\n\nr.null water73 set=255\nr.null water216 set=255\nr.stats -ac flag216,water216\n\nr.colors water216 color=wave\n\necho "0 yellow\n61 blue\n62 purple\nend\n" |\n r.colors water216 rules=-\n\nr.stats -ac water73,water216\nr.to.vect input=water216@PERMANENT output=water216v type=point\n##v.out.ogr input=water216v type=point output="PG:host=localhost dbname=gisdata user=jferrer" output_layer=MDSW.water216v format=PostgreSQL\n')))}p.isMDXComponent=!0}}]);