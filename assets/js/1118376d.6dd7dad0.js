"use strict";(self.webpackChunkdocusite=self.webpackChunkdocusite||[]).push([[8781],{3905:(e,t,a)=>{a.d(t,{Zo:()=>d,kt:()=>m});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function o(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},l=Object.keys(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var i=n.createContext({}),c=function(e){var t=n.useContext(i),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},d=function(e){var t=c(e.components);return n.createElement(i.Provider,{value:t},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},u=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=c(a),u=r,m=p["".concat(i,".").concat(u)]||p[u]||g[u]||l;return a?n.createElement(m,s(s({ref:t},d),{},{components:a})):n.createElement(m,s({ref:t},d))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var l=a.length,s=new Array(l);s[0]=u;var o={};for(var i in t)hasOwnProperty.call(t,i)&&(o[i]=t[i]);o.originalType=e,o[p]="string"==typeof e?e:r,s[1]=o;for(var c=2;c<l;c++)s[c]=a[c];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}u.displayName="MDXCreateElement"},825:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var n=a(7462),r=(a(7294),a(3905));const l={title:"GLIMS_2019",description:"GLIMS Glacier database",tags:["tropical glaciers","IUCN RLE"]},s=void 0,o={unversionedId:"cryosphere/global/Global-land-ice-measurements",id:"cryosphere/global/Global-land-ice-measurements",title:"GLIMS_2019",description:"GLIMS Glacier database",source:"@site/docs/cryosphere/global/Global-land-ice-measurements.md",sourceDirName:"cryosphere/global",slug:"/cryosphere/global/Global-land-ice-measurements",permalink:"/cesdata/docs/cryosphere/global/Global-land-ice-measurements",draft:!1,tags:[{label:"tropical glaciers",permalink:"/cesdata/docs/tags/tropical-glaciers"},{label:"IUCN RLE",permalink:"/cesdata/docs/tags/iucn-rle"}],version:"current",frontMatter:{title:"GLIMS_2019",description:"GLIMS Glacier database",tags:["tropical glaciers","IUCN RLE"]},sidebar:"tutorialSidebar",previous:{title:"GlaThiDa",permalink:"/cesdata/docs/cryosphere/global/GlaThiDa"},next:{title:"Global river ice",permalink:"/cesdata/docs/cryosphere/global/Global-river-ice-dataset"}},i={},c=[{value:"Description",id:"description",level:2},{value:"Links",id:"links",level:2},{value:"Citation",id:"citation",level:2},{value:"Data access",id:"data-access",level:2},{value:"Data download and preparation",id:"data-download-and-preparation",level:3},{value:"This dataset is used for...",id:"this-dataset-is-used-for",level:2},{value:"IUCN RLE assessment of tropical glaciers",id:"iucn-rle-assessment-of-tropical-glaciers",level:3}],d={toc:c},p="wrapper";function g(e){let{components:t,...a}=e;return(0,r.kt)(p,(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"description"},"Description"),(0,r.kt)("p",null,"GLIMS Glacier database\nGlobal Land Ice Measurements from Space initiative (GLIMS)"),(0,r.kt)("h2",{id:"links"},"Links"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://glims.colorado.edu/glacierdata/"},"Webpage")),(0,r.kt)("h2",{id:"citation"},"Citation"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"GLIMS and NSIDC (2005, updated 2018): Global Land Ice Measurements\nfrom Space glacier database.  Compiled and made available by the\ninternational GLIMS community and the National Snow and Ice Data Center,\nBoulder CO, U.S.A.  DOI:10.7265/N5V98602")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},'Raup, B.H.; A. Racoviteanu; S.J.S. Khalsa; C. Helm; R. Armstrong; Y.\nArnaud (2007).  "The GLIMS Geospatial Glacier Database: a New Tool for\nStudying Glacier Change".  Global and Planetary Change 56:101--110.\n(doi:10.1016/j.gloplacha.2006.07.018)')),(0,r.kt)("h2",{id:"data-access"},"Data access"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://www.glims.org/download/"},"http://www.glims.org/download/")),(0,r.kt)("h3",{id:"data-download-and-preparation"},"Data download and preparation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"DPATH=cryosphere/global\nDNAME=GLIMS_2019\n\nmkdir -p $GISDATA/$DPATH/$DNAME/\ncd $GISDATA/$DPATH/$DNAME/\n\nwget --continue http://www.glims.org/download/glims_db_20191217.zip\n")),(0,r.kt)("p",null,"We import this dataset in postgis for further data preparation and selection"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'mkdir -p $WORKDIR/GLIMS\ncd $WORKDIR/GLIMS\nunzip $GISDATA/$DPATH/$DNAME/glims_db_20191217.zip\n cd $WORKDIR/GLIMS/glims_download*\n\npsql gisdata jferrer -c "CREATE SCHEMA glims"\nfor SHPFILE in images lines polygons points\ndo\n   ogr2ogr -f "PostgreSQL" PG:"host=localhost user=jferrer dbname=gisdata" -lco SCHEMA=glims -nlt PROMOTE_TO_MULTI  glims_$SHPFILE.shp glims_$SHPFILE -nln $SHPFILE\n done\ncd $WORKDIR\nrm -r $WORKDIR/GLIMS\n\n')),(0,r.kt)("p",null,'Or we can filter them using ogr2ogr\nThen we create a table with the most recent glacier outlines filtering by record status ("okay") and glacier status ("exists") :'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cd glims_download*\n\nmodule add python/3.8.3 perl/5.28.0 geos/3.8.1 gdal/3.2.1\n\nogr2ogr -f \"GPKG\" -sql \"SELECT glac_id, glac_name, anlys_time FROM glims_polygons  WHERE rec_status = 'okay' AND glac_stat = 'exists' AND line_type = 'glac_bound'\" valid_glaciers.gpkg glims_polygons.shp -nlt PROMOTE_TO_MULTI -nln valid_glaciers -makevalid\n\n")),(0,r.kt)("p",null,"This way we can summarize information according to documented variables, for example, just ",(0,r.kt)("inlineCode",{parentName:"p"},"psql gisdata")," and:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"}," select line_type,count(*) from glims.polygons group by line_type;\nselect count(distinct glac_id),count(*) from glims.polygons;\n\nselect glac_stat,rec_status, count(distinct glac_id) from glims.polygons group by glac_stat,rec_status;\n\n\n")),(0,r.kt)("p",null,"We now extract some features to a new table (in ",(0,r.kt)("inlineCode",{parentName:"p"},"psql gisdata"),"). This will create a list with the most recent glacier outlines"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"\n-- order by anlys_time\n-- filter by rec_status = \"okay\" & glac_stat = \"exists\"\nCREATE table glims.valid_glaciers AS(\nWITH summary AS (\n   SELECT p.glac_id,\n          p.glac_name,\n          p.wkb_geometry,\n          ROW_NUMBER() OVER(PARTITION BY p.glac_id\n                                ORDER BY p.anlys_time DESC) AS rk\n     FROM glims.polygons p\n     WHERE rec_status = 'okay' AND glac_stat = 'exists' AND line_type = 'glac_bound'\n     )\nSELECT s.*\n FROM summary s\nWHERE s.rk = 1);\n-- 319732 records\n")),(0,r.kt)("p",null,'This will create a list of points with the centroid of the features labeled as "internal rock"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"\nCREATE table glims.valid_nunataks AS(\n   SELECT p.glac_id,\n          p.glac_name,\n          st_centroid(p.wkb_geometry) AS wkb_geometry\n     FROM glims.polygons p\n     WHERE rec_status = 'okay' AND glac_stat = 'exists' AND line_type = 'intrnl_rock'\n     );\n-- 447 records\n")),(0,r.kt)("p",null,"In R we can retrieve the data for any area of interest using following script (",(0,r.kt)("inlineCode",{parentName:"p"},"R --vanilla"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-{r}"},'require(sf)\nrequire(dplyr)\n\nglims <- read_sf("dist-records/glims_download_56134/glims_points.shp")\nglims_pols <- read_sf("dist-records/glims_download_56134/glims_polygons.shp")\n\nglims_pols %>% st_drop_geometry() %>% group_by(rec_status,glac_stat,line_type) %>% summarise(n=n(),n_ids=n_distinct(glac_id))\n\nglims_pols %>% st_drop_geometry() %>% group_by(glac_id) %>% summarise(n=n()) %>% arrange(desc(n))\n\nslc <- glims_pols %>% filter(glac_id==\'G302228E64270S\')\n\nrequire("RPostgreSQL")\n\nwork.dir <- Sys.getenv("WORKDIR")\nsetwd(work.dir)\n\ndrv <- dbDriver("PostgreSQL") ## remember to update .pgpass file\ncon <- dbConnect(drv, dbname = "gisdata",\n                 host = ifelse( system("hostname -s",intern=T)=="terra","localhost","terra.ad.unsw.edu.au"),\n                 port = 5432,\n                 user = "jferrer")\n\n# Area of interest POLYGON((-80 -10,-69 -10,-69 12,-80 12,-80 -10)\nT6.2.ss <- st_read(con, query="SELECT * FROM glims.valid_nunataks WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-80 -10,-69 -10,-69 12,-80 12,-80 -10))\') ")\n\nT6.1.ss <- st_read(con, query="SELECT * FROM glims.valid_glaciers WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-80 -10,-69 -10,-69 12,-80 12,-80 -10))\')")\n\n# all centroids in \'lower\' latitudes\nT6.2 <- st_read(con, query="SELECT glac_id,wkb_geometry  FROM glims.valid_nunataks WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-180 -60,-180 60,180 60,180 -60,-180 -60))\')")\n\nT6.1 <- st_read(con, query="SELECT glac_id,ST_Centroid(wkb_geometry) as cents FROM glims.valid_glaciers WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-180 -60,-180 60,180 60,180 -60,-180 -60))\')")\n\ndbDisconnect(con)\nsave(file=\'Glaciers-Northern-South-America.rda\',T6.1,T6.2,T6.1.ss,T6.2.ss)\n\n')),(0,r.kt)("h2",{id:"this-dataset-is-used-for"},"This dataset is used for..."),(0,r.kt)("h3",{id:"iucn-rle-assessment-of-tropical-glaciers"},"IUCN RLE assessment of tropical glaciers"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("a",{parentName:"li",href:"https://osf.io/432sb/"},"OSF project component"))))}g.isMDXComponent=!0}}]);