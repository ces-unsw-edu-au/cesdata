"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8781],{5699:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>r,default:()=>g,frontMatter:()=>t,metadata:()=>i,toc:()=>c});var a=s(5893),l=s(1151);const t={title:"GLIMS_2019",description:"GLIMS Glacier database",tags:["tropical glaciers","IUCN RLE"]},r=void 0,i={id:"cryosphere/global/Global-land-ice-measurements",title:"GLIMS_2019",description:"GLIMS Glacier database",source:"@site/docs/cryosphere/global/Global-land-ice-measurements.md",sourceDirName:"cryosphere/global",slug:"/cryosphere/global/Global-land-ice-measurements",permalink:"/cesdata/docs/cryosphere/global/Global-land-ice-measurements",draft:!1,unlisted:!1,tags:[{label:"tropical glaciers",permalink:"/cesdata/docs/tags/tropical-glaciers"},{label:"IUCN RLE",permalink:"/cesdata/docs/tags/iucn-rle"}],version:"current",frontMatter:{title:"GLIMS_2019",description:"GLIMS Glacier database",tags:["tropical glaciers","IUCN RLE"]},sidebar:"tutorialSidebar",previous:{title:"GlaThiDa",permalink:"/cesdata/docs/cryosphere/global/GlaThiDa"},next:{title:"Global river ice",permalink:"/cesdata/docs/cryosphere/global/Global-river-ice-dataset"}},o={},c=[{value:"Description",id:"description",level:2},{value:"Links",id:"links",level:2},{value:"Citation",id:"citation",level:2},{value:"Data access",id:"data-access",level:2},{value:"Data download and preparation",id:"data-download-and-preparation",level:3},{value:"This dataset is used for...",id:"this-dataset-is-used-for",level:2},{value:"IUCN RLE assessment of tropical glaciers",id:"iucn-rle-assessment-of-tropical-glaciers",level:3}];function d(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,l.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.h2,{id:"description",children:"Description"}),"\n",(0,a.jsx)(n.p,{children:"GLIMS Glacier database\nGlobal Land Ice Measurements from Space initiative (GLIMS)"}),"\n",(0,a.jsx)(n.h2,{id:"links",children:"Links"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"http://glims.colorado.edu/glacierdata/",children:"Webpage"})}),"\n",(0,a.jsx)(n.h2,{id:"citation",children:"Citation"}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:"GLIMS and NSIDC (2005, updated 2018): Global Land Ice Measurements\nfrom Space glacier database.  Compiled and made available by the\ninternational GLIMS community and the National Snow and Ice Data Center,\nBoulder CO, U.S.A.  DOI:10.7265/N5V98602"}),"\n"]}),"\n",(0,a.jsxs)(n.blockquote,{children:["\n",(0,a.jsx)(n.p,{children:'Raup, B.H.; A. Racoviteanu; S.J.S. Khalsa; C. Helm; R. Armstrong; Y.\nArnaud (2007).  "The GLIMS Geospatial Glacier Database: a New Tool for\nStudying Glacier Change".  Global and Planetary Change 56:101--110.\n(doi:10.1016/j.gloplacha.2006.07.018)'}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"data-access",children:"Data access"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.a,{href:"http://www.glims.org/download/",children:"http://www.glims.org/download/"})}),"\n",(0,a.jsx)(n.h3,{id:"data-download-and-preparation",children:"Data download and preparation"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"DPATH=cryosphere/global\nDNAME=GLIMS_2019\n\nmkdir -p $GISDATA/$DPATH/$DNAME/\ncd $GISDATA/$DPATH/$DNAME/\n\nwget --continue http://www.glims.org/download/glims_db_20191217.zip\n"})}),"\n",(0,a.jsx)(n.p,{children:"We import this dataset in postgis for further data preparation and selection"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:'mkdir -p $WORKDIR/GLIMS\ncd $WORKDIR/GLIMS\nunzip $GISDATA/$DPATH/$DNAME/glims_db_20191217.zip\n cd $WORKDIR/GLIMS/glims_download*\n\npsql gisdata jferrer -c "CREATE SCHEMA glims"\nfor SHPFILE in images lines polygons points\ndo\n   ogr2ogr -f "PostgreSQL" PG:"host=localhost user=jferrer dbname=gisdata" -lco SCHEMA=glims -nlt PROMOTE_TO_MULTI  glims_$SHPFILE.shp glims_$SHPFILE -nln $SHPFILE\n done\ncd $WORKDIR\nrm -r $WORKDIR/GLIMS\n\n'})}),"\n",(0,a.jsx)(n.p,{children:'Or we can filter them using ogr2ogr\nThen we create a table with the most recent glacier outlines filtering by record status ("okay") and glacier status ("exists") :'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sh",children:"cd glims_download*\n\nmodule add python/3.8.3 perl/5.28.0 geos/3.8.1 gdal/3.2.1\n\nogr2ogr -f \"GPKG\" -sql \"SELECT glac_id, glac_name, anlys_time FROM glims_polygons  WHERE rec_status = 'okay' AND glac_stat = 'exists' AND line_type = 'glac_bound'\" valid_glaciers.gpkg glims_polygons.shp -nlt PROMOTE_TO_MULTI -nln valid_glaciers -makevalid\n\n"})}),"\n",(0,a.jsxs)(n.p,{children:["This way we can summarize information according to documented variables, for example, just ",(0,a.jsx)(n.code,{children:"psql gisdata"})," and:"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:" select line_type,count(*) from glims.polygons group by line_type;\nselect count(distinct glac_id),count(*) from glims.polygons;\n\nselect glac_stat,rec_status, count(distinct glac_id) from glims.polygons group by glac_stat,rec_status;\n\n\n"})}),"\n",(0,a.jsxs)(n.p,{children:["We now extract some features to a new table (in ",(0,a.jsx)(n.code,{children:"psql gisdata"}),"). This will create a list with the most recent glacier outlines"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"\n-- order by anlys_time\n-- filter by rec_status = \"okay\" & glac_stat = \"exists\"\nCREATE table glims.valid_glaciers AS(\nWITH summary AS (\n   SELECT p.glac_id,\n          p.glac_name,\n          p.wkb_geometry,\n          ROW_NUMBER() OVER(PARTITION BY p.glac_id\n                                ORDER BY p.anlys_time DESC) AS rk\n     FROM glims.polygons p\n     WHERE rec_status = 'okay' AND glac_stat = 'exists' AND line_type = 'glac_bound'\n     )\nSELECT s.*\n FROM summary s\nWHERE s.rk = 1);\n-- 319732 records\n"})}),"\n",(0,a.jsx)(n.p,{children:'This will create a list of points with the centroid of the features labeled as "internal rock"'}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-sql",children:"\nCREATE table glims.valid_nunataks AS(\n   SELECT p.glac_id,\n          p.glac_name,\n          st_centroid(p.wkb_geometry) AS wkb_geometry\n     FROM glims.polygons p\n     WHERE rec_status = 'okay' AND glac_stat = 'exists' AND line_type = 'intrnl_rock'\n     );\n-- 447 records\n"})}),"\n",(0,a.jsxs)(n.p,{children:["In R we can retrieve the data for any area of interest using following script (",(0,a.jsx)(n.code,{children:"R --vanilla"}),"):"]}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-{r}",children:'require(sf)\nrequire(dplyr)\n\nglims <- read_sf("dist-records/glims_download_56134/glims_points.shp")\nglims_pols <- read_sf("dist-records/glims_download_56134/glims_polygons.shp")\n\nglims_pols %>% st_drop_geometry() %>% group_by(rec_status,glac_stat,line_type) %>% summarise(n=n(),n_ids=n_distinct(glac_id))\n\nglims_pols %>% st_drop_geometry() %>% group_by(glac_id) %>% summarise(n=n()) %>% arrange(desc(n))\n\nslc <- glims_pols %>% filter(glac_id==\'G302228E64270S\')\n\nrequire("RPostgreSQL")\n\nwork.dir <- Sys.getenv("WORKDIR")\nsetwd(work.dir)\n\ndrv <- dbDriver("PostgreSQL") ## remember to update .pgpass file\ncon <- dbConnect(drv, dbname = "gisdata",\n                 host = ifelse( system("hostname -s",intern=T)=="terra","localhost","terra.ad.unsw.edu.au"),\n                 port = 5432,\n                 user = "jferrer")\n\n# Area of interest POLYGON((-80 -10,-69 -10,-69 12,-80 12,-80 -10)\nT6.2.ss <- st_read(con, query="SELECT * FROM glims.valid_nunataks WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-80 -10,-69 -10,-69 12,-80 12,-80 -10))\') ")\n\nT6.1.ss <- st_read(con, query="SELECT * FROM glims.valid_glaciers WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-80 -10,-69 -10,-69 12,-80 12,-80 -10))\')")\n\n# all centroids in \'lower\' latitudes\nT6.2 <- st_read(con, query="SELECT glac_id,wkb_geometry  FROM glims.valid_nunataks WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-180 -60,-180 60,180 60,180 -60,-180 -60))\')")\n\nT6.1 <- st_read(con, query="SELECT glac_id,ST_Centroid(wkb_geometry) as cents FROM glims.valid_glaciers WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-180 -60,-180 60,180 60,180 -60,-180 -60))\')")\n\ndbDisconnect(con)\nsave(file=\'Glaciers-Northern-South-America.rda\',T6.1,T6.2,T6.1.ss,T6.2.ss)\n\n'})}),"\n",(0,a.jsx)(n.h2,{id:"this-dataset-is-used-for",children:"This dataset is used for..."}),"\n",(0,a.jsx)(n.h3,{id:"iucn-rle-assessment-of-tropical-glaciers",children:"IUCN RLE assessment of tropical glaciers"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:(0,a.jsx)(n.a,{href:"https://osf.io/432sb/",children:"OSF project component"})}),"\n"]})]})}function g(e={}){const{wrapper:n}={...(0,l.a)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},1151:(e,n,s)=>{s.d(n,{Z:()=>i,a:()=>r});var a=s(7294);const l={},t=a.createContext(l);function r(e){const n=a.useContext(t);return a.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);