"use strict";(self.webpackChunkdocusite=self.webpackChunkdocusite||[]).push([[8781],{3905:(e,a,n)=>{n.d(a,{Zo:()=>d,kt:()=>u});var t=n(7294);function r(e,a,n){return a in e?Object.defineProperty(e,a,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[a]=n,e}function l(e,a){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);a&&(t=t.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),n.push.apply(n,t)}return n}function s(e){for(var a=1;a<arguments.length;a++){var n=null!=arguments[a]?arguments[a]:{};a%2?l(Object(n),!0).forEach((function(a){r(e,a,n[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(n,a))}))}return e}function o(e,a){if(null==e)return{};var n,t,r=function(e,a){if(null==e)return{};var n,t,r={},l=Object.keys(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||(r[n]=e[n]);return r}(e,a);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(t=0;t<l.length;t++)n=l[t],a.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var i=t.createContext({}),c=function(e){var a=t.useContext(i),n=a;return e&&(n="function"==typeof e?e(a):s(s({},a),e)),n},d=function(e){var a=c(e.components);return t.createElement(i.Provider,{value:a},e.children)},p="mdxType",g={inlineCode:"code",wrapper:function(e){var a=e.children;return t.createElement(t.Fragment,{},a)}},m=t.forwardRef((function(e,a){var n=e.components,r=e.mdxType,l=e.originalType,i=e.parentName,d=o(e,["components","mdxType","originalType","parentName"]),p=c(n),m=r,u=p["".concat(i,".").concat(m)]||p[m]||g[m]||l;return n?t.createElement(u,s(s({ref:a},d),{},{components:n})):t.createElement(u,s({ref:a},d))}));function u(e,a){var n=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var l=n.length,s=new Array(l);s[0]=m;var o={};for(var i in a)hasOwnProperty.call(a,i)&&(o[i]=a[i]);o.originalType=e,o[p]="string"==typeof e?e:r,s[1]=o;for(var c=2;c<l;c++)s[c]=n[c];return t.createElement.apply(null,s)}return t.createElement.apply(null,n)}m.displayName="MDXCreateElement"},825:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>i,contentTitle:()=>s,default:()=>g,frontMatter:()=>l,metadata:()=>o,toc:()=>c});var t=n(7462),r=(n(7294),n(3905));const l={},s="GLIMS Glacier database",o={unversionedId:"cryosphere/global/Global-land-ice-measurements",id:"cryosphere/global/Global-land-ice-measurements",title:"GLIMS Glacier database",description:"Global Land Ice Measurements from Space initiative (GLIMS)",source:"@site/docs/cryosphere/global/Global-land-ice-measurements.md",sourceDirName:"cryosphere/global",slug:"/cryosphere/global/Global-land-ice-measurements",permalink:"/docs/cryosphere/global/Global-land-ice-measurements",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Glacier Thickness Database (GlaThiDa) 3.1.0",permalink:"/docs/cryosphere/global/GlaThiDa"},next:{title:"Global river ice",permalink:"/docs/cryosphere/global/Global-river-ice-dataset"}},i={},c=[{value:"Citation",id:"citation",level:4},{value:"Data access",id:"data-access",level:4},{value:"Data download and preparation",id:"data-download-and-preparation",level:4}],d={toc:c},p="wrapper";function g(e){let{components:a,...n}=e;return(0,r.kt)(p,(0,t.Z)({},d,n,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"glims-glacier-database"},"GLIMS Glacier database"),(0,r.kt)("p",null,"Global Land Ice Measurements from Space initiative (GLIMS)"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://glims.colorado.edu/glacierdata/"},"Webpage")),(0,r.kt)("h4",{id:"citation"},"Citation"),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},"GLIMS and NSIDC (2005, updated 2018): Global Land Ice Measurements\nfrom Space glacier database.  Compiled and made available by the\ninternational GLIMS community and the National Snow and Ice Data Center,\nBoulder CO, U.S.A.  DOI:10.7265/N5V98602")),(0,r.kt)("blockquote",null,(0,r.kt)("p",{parentName:"blockquote"},'Raup, B.H.; A. Racoviteanu; S.J.S. Khalsa; C. Helm; R. Armstrong; Y.\nArnaud (2007).  "The GLIMS Geospatial Glacier Database: a New Tool for\nStudying Glacier Change".  Global and Planetary Change 56:101--110.\n(doi:10.1016/j.gloplacha.2006.07.018)')),(0,r.kt)("h4",{id:"data-access"},"Data access"),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"http://www.glims.org/download/"},"http://www.glims.org/download/")),(0,r.kt)("h4",{id:"data-download-and-preparation"},"Data download and preparation"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"DPATH=cryosphere/global\nDNAME=GLIMS_2019\n\nmkdir -p $GISDATA/$DPATH/$DNAME/\ncd $GISDATA/$DPATH/$DNAME/\n\nwget --continue http://www.glims.org/download/glims_db_20191217.zip\n")),(0,r.kt)("p",null,"We import this dataset in postgis for further data preparation and selection"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},'mkdir -p $WORKDIR/GLIMS\ncd $WORKDIR/GLIMS\nunzip $GISDATA/$DPATH/$DNAME/glims_db_20191217.zip\n cd $WORKDIR/GLIMS/glims_download*\n\npsql gisdata jferrer -c "CREATE SCHEMA glims"\nfor SHPFILE in images lines polygons points\ndo\n   ogr2ogr -f "PostgreSQL" PG:"host=localhost user=jferrer dbname=gisdata" -lco SCHEMA=glims -nlt PROMOTE_TO_MULTI  glims_$SHPFILE.shp glims_$SHPFILE -nln $SHPFILE\n done\ncd $WORKDIR\nrm -r $WORKDIR/GLIMS\n\n')),(0,r.kt)("p",null,'Or we can filter them using ogr2ogr\nThen we create a table with the most recent glacier outlines filtering by record status ("okay") and glacier status ("exists") :'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sh"},"cd glims_download*\n\nmodule add python/3.8.3 perl/5.28.0 geos/3.8.1 gdal/3.2.1\n\nogr2ogr -f \"GPKG\" -sql \"SELECT glac_id, glac_name, anlys_time FROM glims_polygons  WHERE rec_status = 'okay' AND glac_stat = 'exists' AND line_type = 'glac_bound'\" valid_glaciers.gpkg glims_polygons.shp -nlt PROMOTE_TO_MULTI -nln valid_glaciers -makevalid\n\n")),(0,r.kt)("p",null,"This way we can summarize information according to documented variables, for example, just ",(0,r.kt)("inlineCode",{parentName:"p"},"psql gisdata")," and:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"}," select line_type,count(*) from glims.polygons group by line_type;\nselect count(distinct glac_id),count(*) from glims.polygons;\n\nselect glac_stat,rec_status, count(distinct glac_id) from glims.polygons group by glac_stat,rec_status;\n\n\n")),(0,r.kt)("p",null,"We now extract some features to a new table (in ",(0,r.kt)("inlineCode",{parentName:"p"},"psql gisdata"),"). This will create a list with the most recent glacier outlines"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"\n-- order by anlys_time\n-- filter by rec_status = \"okay\" & glac_stat = \"exists\"\nCREATE table glims.valid_glaciers AS(\nWITH summary AS (\n   SELECT p.glac_id,\n          p.glac_name,\n          p.wkb_geometry,\n          ROW_NUMBER() OVER(PARTITION BY p.glac_id\n                                ORDER BY p.anlys_time DESC) AS rk\n     FROM glims.polygons p\n     WHERE rec_status = 'okay' AND glac_stat = 'exists' AND line_type = 'glac_bound'\n     )\nSELECT s.*\n FROM summary s\nWHERE s.rk = 1);\n-- 319732 records\n")),(0,r.kt)("p",null,'This will create a list of points with the centroid of the features labeled as "internal rock"'),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"\nCREATE table glims.valid_nunataks AS(\n   SELECT p.glac_id,\n          p.glac_name,\n          st_centroid(p.wkb_geometry) AS wkb_geometry\n     FROM glims.polygons p\n     WHERE rec_status = 'okay' AND glac_stat = 'exists' AND line_type = 'intrnl_rock'\n     );\n-- 447 records\n")),(0,r.kt)("p",null,"In R we can retrieve the data for any area of interest using following script (",(0,r.kt)("inlineCode",{parentName:"p"},"R --vanilla"),"):"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-{r}"},'require(sf)\nrequire(dplyr)\n\nglims <- read_sf("dist-records/glims_download_56134/glims_points.shp")\nglims_pols <- read_sf("dist-records/glims_download_56134/glims_polygons.shp")\n\nglims_pols %>% st_drop_geometry() %>% group_by(rec_status,glac_stat,line_type) %>% summarise(n=n(),n_ids=n_distinct(glac_id))\n\nglims_pols %>% st_drop_geometry() %>% group_by(glac_id) %>% summarise(n=n()) %>% arrange(desc(n))\n\nslc <- glims_pols %>% filter(glac_id==\'G302228E64270S\')\n\nrequire("RPostgreSQL")\n\nwork.dir <- Sys.getenv("WORKDIR")\nsetwd(work.dir)\n\ndrv <- dbDriver("PostgreSQL") ## remember to update .pgpass file\ncon <- dbConnect(drv, dbname = "gisdata",\n                 host = ifelse( system("hostname -s",intern=T)=="terra","localhost","terra.ad.unsw.edu.au"),\n                 port = 5432,\n                 user = "jferrer")\n\n# Area of interest POLYGON((-80 -10,-69 -10,-69 12,-80 12,-80 -10)\nT6.2.ss <- st_read(con, query="SELECT * FROM glims.valid_nunataks WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-80 -10,-69 -10,-69 12,-80 12,-80 -10))\') ")\n\nT6.1.ss <- st_read(con, query="SELECT * FROM glims.valid_glaciers WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-80 -10,-69 -10,-69 12,-80 12,-80 -10))\')")\n\n# all centroids in \'lower\' latitudes\nT6.2 <- st_read(con, query="SELECT glac_id,wkb_geometry  FROM glims.valid_nunataks WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-180 -60,-180 60,180 60,180 -60,-180 -60))\')")\n\nT6.1 <- st_read(con, query="SELECT glac_id,ST_Centroid(wkb_geometry) as cents FROM glims.valid_glaciers WHERE ST_Intersects(wkb_geometry,\'SRID=4326;POLYGON((-180 -60,-180 60,180 60,180 -60,-180 -60))\')")\n\ndbDisconnect(con)\nsave(file=\'Glaciers-Northern-South-America.rda\',T6.1,T6.2,T6.1.ss,T6.2.ss)\n\n')))}g.isMDXComponent=!0}}]);