"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3687],{1007:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>l});var t=n(5893),o=n(1151);const i={title:"How to set up this site"},a="We built this site with Rock'n'Roll",r={type:"mdx",permalink:"/cesdata/how-to-site",source:"@site/src/pages/how-to-site.md",title:"How to set up this site",description:"Well, not quite but near enough...",frontMatter:{title:"How to set up this site"},unlisted:!1},d={},l=[{value:"Start your site",id:"start-your-site",level:2},{value:"My experience so far",id:"my-experience-so-far",level:2},{value:"build, serve and deploy",id:"build-serve-and-deploy",level:3},{value:"Using fontawesome",id:"using-fontawesome",level:3},{value:"Images",id:"images",level:3},{value:"Where to locate stuff",id:"where-to-locate-stuff",level:3},{value:"update packages",id:"update-packages",level:3}];function c(e){const s={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",section:"section",strong:"strong",sup:"sup",ul:"ul",...(0,o.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"we-built-this-site-with-rocknroll",children:"We built this site with Rock'n'Roll"}),"\n",(0,t.jsx)(s.p,{children:"Well, not quite but near enough..."}),"\n",(0,t.jsxs)(s.p,{children:["We built this awesome documentation site using ",(0,t.jsx)(s.a,{href:"https://docusaurus.io/docs",children:"https://docusaurus.io/docs"})]}),"\n",(0,t.jsxs)(s.p,{children:["First we installed ",(0,t.jsx)(s.a,{href:"https://nodejs.org/en/download/",children:"Node.js"})," (recommended version 16.14 or above)."]}),"\n",(0,t.jsxs)(s.admonition,{title:"npx and conda",type:"caution",children:[(0,t.jsx)(s.p,{children:"Make sure we deactivate conda to use the downloaded npx version:"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"conda deactivate\nwhich npx\nnpx -v \n"})})]}),"\n",(0,t.jsx)(s.p,{children:"Install docusaurus with:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"npm install docusaurus\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The first time we ",(0,t.jsx)(s.em,{children:"npx"})," docusaurus :"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"npx create-docusaurus@latest $REPO_PATH/docusite classic\n"})}),"\n",(0,t.jsx)(s.p,{children:"We can skip this if docusite is already created and configured, but beware that differences between versions can cause problems, and will require modifying config files."}),"\n",(0,t.jsx)(s.p,{children:"You can type this command into Command Prompt, Powershell, Terminal, or any other integrated terminal of your code editor."}),"\n",(0,t.jsx)(s.p,{children:"The command also installs all necessary dependencies you need to run Docusaurus."}),"\n",(0,t.jsxs)(s.admonition,{title:"version number",type:"caution",children:[(0,t.jsxs)(s.p,{children:["We have used several versions, we started with ",(0,t.jsx)(s.code,{children:"9.5.1"}),", updated in June to ",(0,t.jsx)(s.code,{children:"9.7.1"}),", then a new minor update from 9.7.1 -> 9.8.1:"]}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo npm install -g npm@9.8.1 \n"})}),(0,t.jsxs)(s.p,{children:["In gaia we are using version ",(0,t.jsx)(s.code,{children:"10.2.3"})]}),(0,t.jsx)(s.p,{children:"Then we update the packages and run an audit"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"sudo npm install -g npm@10.2.3\nnpm i @docusaurus/core@latest @docusaurus/preset-classic@latest @docusaurus/module-type-aliases@latest\nnpm audit fix # or # npm audit fix --force\n"})}),(0,t.jsx)(s.p,{children:"Problems with different versions, might require"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:" rm -r node_modules  package.json   package-lock.json\n"})}),(0,t.jsxs)(s.p,{children:["before rerunning the previous steps... and then manually fixing the ",(0,t.jsx)(s.code,{children:"docusaurus.config.js"})," file (compare it with a fresh install to locate the differences)."]})]}),"\n",(0,t.jsx)(s.h2,{id:"start-your-site",children:"Start your site"}),"\n",(0,t.jsx)(s.p,{children:"Run the development server:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"cd $REPO_PATH/docusite\nnpx docusaurus start\n"})}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"cd"})," command changes the directory you're working with. In order to work with your newly created Docusaurus site, you'll need to navigate the terminal there."]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"npx docusaurus start"})," (apparently you could use ",(0,t.jsx)(s.code,{children:"npm run start"})," also",(0,t.jsx)(s.sup,{children:(0,t.jsx)(s.a,{href:"#user-content-fn-1",id:"user-content-fnref-1","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"1"})}),") command builds your website locally and serves it through a development server, ready for you to view at ",(0,t.jsx)(s.a,{href:"http://localhost:3000/",children:"http://localhost:3000/"}),"."]}),"\n",(0,t.jsxs)(s.p,{children:["The I started with opening ",(0,t.jsx)(s.code,{children:"docs/intro.md"})," and editing some lines: the site ",(0,t.jsx)(s.strong,{children:"reloads automatically"})," and displays your changes. Feels like magic!"]}),"\n",(0,t.jsx)(s.h2,{id:"my-experience-so-far",children:"My experience so far"}),"\n",(0,t.jsx)(s.p,{children:"From there I just trial-ed and error-ed enough to get most of what we needed, a lot of what we wanted and all that I could."}),"\n",(0,t.jsxs)(s.p,{children:["I have done most of this using just markdown, because I just haven't got much time to properly learn react.js, but that's OK, you don't need React to write simple standalone pages.",(0,t.jsx)(s.sup,{children:(0,t.jsx)(s.a,{href:"#user-content-fn-2",id:"user-content-fnref-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})})]}),"\n",(0,t.jsxs)(s.p,{children:["I am using the ",(0,t.jsx)(s.strong,{children:"classic template"})," because I just don't have time to explore and tweak templates and themes."]}),"\n",(0,t.jsx)(s.h3,{id:"build-serve-and-deploy",children:"build, serve and deploy"}),"\n",(0,t.jsx)(s.p,{children:"Build a optimized static site:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"npx docusaurus build\n"})}),"\n",(0,t.jsxs)(s.p,{children:["This will serve a static site at ",(0,t.jsx)(s.code,{children:"localhost:3000/cesdata"})]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"npx docusaurus serve\n"})}),"\n",(0,t.jsx)(s.p,{children:"Or use this to keep a site that updates after each edit:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"npx docusaurus start\n"})}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.em,{children:"Should I use Github pages?"})}),"\n",(0,t.jsxs)(s.p,{children:[(0,t.jsx)(s.a,{href:"https://docusaurus.io/docs/deployment#deploying-to-github-pages",children:"Seems straightforward"}),"..."]}),"\n",(0,t.jsx)(s.p,{children:"My steps:"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["In GitHub: go to ",(0,t.jsx)(s.code,{children:"Settings"})," / ",(0,t.jsx)(s.code,{children:"Pages"}),", set Source to ",(0,t.jsx)(s.em,{children:"Deploy from a branch"})," and then the name of the branch."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["If the repository is private, this will serve the site at a random url, something like ",(0,t.jsx)(s.code,{children:"https://curly-bassoon-6989k23.pages.github.io/"}),", once the repository is public it will work with the ",(0,t.jsx)(s.code,{children:"https://ces-unsw-edu-au.github.io/"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Then, modify ",(0,t.jsx)(s.code,{children:"docusaurus.config.js"})," and add: ",(0,t.jsx)(s.code,{children:"url"}),", ",(0,t.jsx)(s.code,{children:"baseUrl"}),", ",(0,t.jsx)(s.code,{children:"organizationName"}),", ",(0,t.jsx)(s.code,{children:"projectName"})," and ",(0,t.jsx)(s.code,{children:"deploymentBranch"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsxs)(s.p,{children:["Also there, set ",(0,t.jsx)(s.code,{children:"trailingSlash"})," to ",(0,t.jsx)(s.code,{children:"false"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"Add an empty file named .nojekyll to the static directory."}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["\n",(0,t.jsx)(s.p,{children:"set up the environment variables: USE_SSH and GIT_USER and call the docusaurus deploy command:"}),"\n",(0,t.jsxs)(s.p,{children:["cd $REPO_PATH/docusite\nUSE_SSH=TRUE && GIT_USER=",(0,t.jsx)(s.code,{children:"my user name"})," && npx docusaurus deploy"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"using-fontawesome",children:"Using fontawesome"}),"\n",(0,t.jsx)(s.p,{children:"I will need to read the docs..."}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.a,{href:"https://docusaurus.community/knowledge/design/icons/fontawesome/",children:"https://docusaurus.community/knowledge/design/icons/fontawesome/"})}),"\n",(0,t.jsx)(s.h3,{id:"images",children:"Images"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"undraw svgs shipped with docusaurus"}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"https://www.svgrepo.com/svg/26855/sloth",children:"https://www.svgrepo.com/svg/26855/sloth"})," CC0 license"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"https://www.svgrepo.com/svg/2155/wombat",children:"https://www.svgrepo.com/svg/2155/wombat"})," CC0 license"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"https://www.svgrepo.com/svg/293158/maps-and-flags-global",children:"https://www.svgrepo.com/svg/293158/maps-and-flags-global"})," CCO license"]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.a,{href:"https://www.svgrepo.com/svg/293157/maps-and-flags-maps-and-flags",children:"https://www.svgrepo.com/svg/293157/maps-and-flags-maps-and-flags"})," CCO license"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"where-to-locate-stuff",children:"Where to locate stuff"}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"docusaurus.config.js"})," file is the place for titles and bottom menus, logos and icons, and other configuration stuff."]}),"\n",(0,t.jsxs)(s.p,{children:["I haven't touch the sidebars.js, I just don't have time for that much customisation. ",(0,t.jsx)(s.sup,{children:(0,t.jsx)(s.a,{href:"#user-content-fn-2",id:"user-content-fnref-2-2","data-footnote-ref":!0,"aria-describedby":"footnote-label",children:"2"})})]}),"\n",(0,t.jsxs)(s.p,{children:["The ",(0,t.jsx)(s.code,{children:"pages/index.js"})," looks scary, I only edited a couple of lines with the main text, but the funny thing is that the feature list is located in ",(0,t.jsx)(s.code,{children:"/src/components/index.js"}),", so that is the place to edit those boxes."]}),"\n",(0,t.jsxs)(s.p,{children:["This ",(0,t.jsx)(s.code,{children:"how-to-site"})," file is in the ",(0,t.jsx)(s.code,{children:"pages"})," folder, which is the place for stand-alone pages. All other stuff is neatly organised in the ",(0,t.jsx)(s.code,{children:"docs"})," folder. The documents in the ",(0,t.jsx)(s.code,{children:"docs"})," folder appear automatically in the left hand side menu, but we have to create explicit links for the ones in the ",(0,t.jsx)(s.code,{children:"pages"})," folder, for example in the ",(0,t.jsx)(s.code,{children:"docusaurus.config.js"})," if we want these to appear in the bottom bar."]}),"\n",(0,t.jsx)(s.h3,{id:"update-packages",children:"update packages"}),"\n",(0,t.jsxs)(s.p,{children:["After manual edits in ",(0,t.jsx)(s.code,{children:"package-lock.json"}),", or problems with ",(0,t.jsx)(s.code,{children:"ERR! could not determine executable to run"})," do:"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-sh",children:"# npm install\nnpm update\nnpm audit fix\n"})}),"\n",(0,t.jsxs)(s.section,{"data-footnotes":!0,className:"footnotes",children:[(0,t.jsx)(s.h2,{className:"sr-only",id:"footnote-label",children:"Footnotes"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{id:"user-content-fn-1",children:["\n",(0,t.jsxs)(s.p,{children:["But I have not clue yet what is the difference between npx and npm... ",(0,t.jsx)(s.a,{href:"#user-content-fnref-1","data-footnote-backref":"","aria-label":"Back to reference 1",className:"data-footnote-backref",children:"\u21a9"})]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{id:"user-content-fn-2",children:["\n",(0,t.jsxs)(s.p,{children:["Well, it seems ",(0,t.jsx)(s.code,{children:"mdx"})," is a thing... \ud83e\udd14 ",(0,t.jsx)(s.a,{href:"#user-content-fnref-2","data-footnote-backref":"","aria-label":"Back to reference 2",className:"data-footnote-backref",children:"\u21a9"})," ",(0,t.jsxs)(s.a,{href:"#user-content-fnref-2-2","data-footnote-backref":"","aria-label":"Back to reference 2-2",className:"data-footnote-backref",children:["\u21a9",(0,t.jsx)(s.sup,{children:"2"})]})]}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.a)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},1151:(e,s,n)=>{n.d(s,{Z:()=>r,a:()=>a});var t=n(7294);const o={},i=t.createContext(o);function a(e){const s=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),t.createElement(i.Provider,{value:s},e.children)}}}]);