"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[339],{7304:(e,a,n)=>{n.r(a),n.d(a,{assets:()=>i,contentTitle:()=>o,default:()=>u,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var t=n(5893),r=n(1151);const s={},o="500\u2010m Resolution Daily Global Surface Water Change Database (2001\u20132016)",l={id:"water/Global-daily-surface-water",title:"500\u2010m Resolution Daily Global Surface Water Change Database (2001\u20132016)",description:"Citation",source:"@site/docs/water/Global-daily-surface-water.md",sourceDirName:"water",slug:"/water/Global-daily-surface-water",permalink:"/cesdata/docs/water/Global-daily-surface-water",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"water",permalink:"/cesdata/docs/category/water"},next:{title:"JRC GSW",permalink:"/cesdata/docs/water/JRC-GSW"}},i={},d=[{value:"Citation",id:"citation",level:4},{value:"Data access",id:"data-access",level:4},{value:"Data download and preparation",id:"data-download-and-preparation",level:4},{value:"VRT datasets",id:"vrt-datasets",level:4},{value:"Notes",id:"notes",level:4}];function c(e){const a={a:"a",blockquote:"blockquote",code:"code",em:"em",h1:"h1",h4:"h4",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.h1,{id:"500m-resolution-daily-global-surface-water-change-database-20012016",children:"500\u2010m Resolution Daily Global Surface Water Change Database (2001\u20132016)"}),"\n",(0,t.jsx)(a.h4,{id:"citation",children:"Citation"}),"\n",(0,t.jsxs)(a.blockquote,{children:["\n",(0,t.jsxs)(a.p,{children:["Luyan Ji, Peng Gong, Jie Wang, Jiancheng Shi, Zhiliang Zhu (2018) ",(0,t.jsx)(a.em,{children:"Construction of the 500-m Resolution Daily Global Surface Water Change Database (2001-2016)"}),". ",(0,t.jsx)(a.strong,{children:"Water Resources Research"})," DOI ",(0,t.jsx)(a.a,{href:"http://dx.doi.org/10.1029/2018wr023060",children:"10.1029/2018wr023060"})]}),"\n"]}),"\n",(0,t.jsx)(a.h4,{id:"data-access",children:"Data access"}),"\n",(0,t.jsx)(a.p,{children:"Data is available at:"}),"\n",(0,t.jsxs)(a.blockquote,{children:["\n",(0,t.jsx)(a.p,{children:(0,t.jsx)(a.a,{href:"http://data.ess.tsinghua.edu.cn/modis_500_2001_2016_waterbody.html",children:"http://data.ess.tsinghua.edu.cn/modis_500_2001_2016_waterbody.html"})}),"\n"]}),"\n",(0,t.jsx)(a.p,{children:"But no documentation or metadata is provided."}),"\n",(0,t.jsx)(a.h4,{id:"data-download-and-preparation",children:"Data download and preparation"}),"\n",(0,t.jsxs)(a.p,{children:["This dataset is ",(0,t.jsx)(a.strong,{children:"HUGE"}),", each ",(0,t.jsx)(a.em,{children:"compressed"})," file is 16G."]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:"source ~/proyectos/CES/cesdata/env/project-env.sh\n\nmkdir -p $GISDATA/water/global/ModisDailyWater/\ncd $GISDATA/water/global/ModisDailyWater/\n\nfor YEAR in $(seq 2001 2016)\ndo\n wget -b -o wget-log-$YEAR --continue  http://data.ess.tsinghua.edu.cn/data/water/MODISWater-500-2001-2015/${YEAR}.rar\ndone\n\n# Check that all finished without problem:\n tail wget-log*\n\n# alternative:\n# curl -C - -O http://data.ess.tsinghua.edu.cn/data/water/MODISWater-500-2001-2015/[2001-2016].rar\n\n"})}),"\n",(0,t.jsxs)(a.p,{children:["Extract data (using a PBS job: ",(0,t.jsx)(a.code,{children:"qsub -I -l select=1:ncpus=1:mem=120gb,walltime=12:00:00"}),")"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:"source ~/proyectos/CES/cesdata/env/project-env.sh\n\ncd $GISDATA/water/ModisDailyWater/\n\nlsar -l 2016.rar ## 242623 directories/files\nunar 2016.rar ## ca. 2 hours to finish - successful extraction\ntree -a 2016-v3/ ## 331 directories, 242292 files\ndu -sch 2016-v3/ ## 39G\n"})}),"\n",(0,t.jsx)(a.p,{children:"Now repeat this for all the others, using a longer PBS job..."}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:"for YEAR in $(seq 2001 2005)\ndo\n   unar ${YEAR}.rar\ndone\n"})}),"\n",(0,t.jsx)(a.p,{children:"... or an array of jobs to finish earlier:"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:"qsub -J 2006-2015 $SCRIPTDIR/inc/pbs/extract-water-Global-daily-surface-water.pbs\n"})}),"\n",(0,t.jsx)(a.h4,{id:"vrt-datasets",children:"VRT datasets"}),"\n",(0,t.jsx)(a.p,{children:"Builds VRT (Virtual Dataset) as a mosaic of the list of input files"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:'ssh -Y $zID@katana.restech.unsw.edu.au\nqsub -I -X -l select=1:ncpus=1:mem=120gb,walltime=12:00:00\n##module avail geos\nmodule add python/2.7.15 perl/5.28.0 gdal/3.2.1 geos/3.8.1\nmodule add grass/7.6.1\nmodule add R/4.0.2  proj4/5.1.0\nsource ~/proyectos/CES/cesdata/env/project-env.sh\n\nmkdir -p $GISDATA/water/global/ModisDailyWater/index\ncd $GISDATA/water/global/ModisDailyWater/index\n\nfor YEAR in $(seq 2001 2016)\ndo\n   mkdir -p $GISDATA/water/global/ModisDailyWater/index/${YEAR}\n   cd $GISDATA/water/global/ModisDailyWater/index/${YEAR}\n   for VAR in water flag\n   do\n      for DOY in {001..366}\n      do\n         ##ls $GISDATA/water/global/ModisDailyWater/${YEAR}/*/${YEAR}*${DOY}_${VAR}.tiff\n         if [ -e index_${VAR}_${YEAR}_${DOY}.vrt ]\n         then\n            echo "listo"\n         else\n            gdalbuildvrt index_${VAR}_${YEAR}_${DOY}.vrt $GISDATA/water/global/ModisDailyWater/${YEAR}*/*/${YEAR}*${DOY}_${VAR}.tiff\n         fi\n      done\n   done\ndone\n\n\ncd $GISDATA/water/global/ModisDailyWater/index\n\nfor i in $(seq 2001 2016);\ndo\n  echo $i\n   ls $i/* | wc\ndone\n\n\n'})}),"\n",(0,t.jsx)(a.p,{children:"There are four discrete values as 0-Land, 61-Water (unfrozen), 62-Water (frozen), and 255-Fill (areas of no value)."}),"\n",(0,t.jsx)(a.h4,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(a.ul,{children:["\n",(0,t.jsx)(a.li,{children:"Here some code for exploring in grass"}),"\n"]}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-sh",children:'cd $WORKDIR\nconda deactivate\ngrass74 -c $GISDATA/sensores/ModisDailyWater/2001/h00v08/2001h00v08073_water.tiff $GISDB/raw/ModisDailyWater\n\nr.in.gdal input=$GISDATA/sensores/ModisDailyWater/2001/h00v08/2001h00v08073_water.tiff output=water73\n\nr.in.gdal input=$GISDATA/sensores/ModisDailyWater/2001/h00v08/2001h00v08216_water.tiff output=water216\nr.in.gdal input=$GISDATA/sensores/ModisDailyWater/2001/h00v08/2001h00v08216_flag.tiff output=flag216\n\nr.null water73 set=255\nr.null water216 set=255\nr.stats -ac flag216,water216\n\nr.colors water216 color=wave\n\necho "0 yellow\n61 blue\n62 purple\nend\n" |\n r.colors water216 rules=-\n\nr.stats -ac water73,water216\nr.to.vect input=water216@PERMANENT output=water216v type=point\n##v.out.ogr input=water216v type=point output="PG:host=localhost dbname=gisdata user=jferrer" output_layer=MDSW.water216v format=PostgreSQL\n'})})]})}function u(e={}){const{wrapper:a}={...(0,r.a)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},1151:(e,a,n)=>{n.d(a,{Z:()=>l,a:()=>o});var t=n(7294);const r={},s=t.createContext(r);function o(e){const a=t.useContext(s);return t.useMemo((function(){return"function"==typeof e?e(a):{...a,...e}}),[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),t.createElement(s.Provider,{value:a},e.children)}}}]);